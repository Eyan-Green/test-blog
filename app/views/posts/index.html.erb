<% unless @post1.nil? && @post2.nil? && @post3.nil? %>
  <div data-controller="infinite-carousel" class="w-full">
    <div class="relative h-64 overflow-hidden">
      <div class="absolute inset-0 flex items-center justify-center transition-transform duration-1000 ease-in-out transform" data-infinite-carousel-target="slide">
        <div class="w-full bg-blue-300 h-full flex flex-col items-center justify-center">
          <h3 class="text-white text-2xl md:text-3xl font-bold"><%= @post1.title.nil? %></h3>
          <h4 class="text-white text-xl md:text-2xl font-bold"><%= link_to 'Read more', post_path(@post1) %></h4>
        </div>
      </div>
      <div class="absolute hidden inset-0 flex items-center justify-center transition-transform duration-1000 ease-in-out transform" data-infinite-carousel-target="slide">
        <div class="w-full bg-red-300 h-full flex flex-col items-center justify-center">
          <h3 class="text-white text-2xl md:text-3xl font-bold"><%= @post2.title %></h3>
          <h4 class="text-white text-xl md:text-2xl font-bold"><%= link_to 'Read more', post_path(@post2) %></h4>
        </div>
      </div>
      <div class="absolute hidden inset-0 flex items-center justify-center transition-transform duration-1000 ease-in-out transform" data-infinite-carousel-target="slide">
        <div class="w-full bg-green-300 h-full flex flex-col items-center justify-center">
          <h3 class="text-white text-2xl md:text-3xl font-bold"><%= @post3.title %></h3>
          <h4 class="text-white text-xl md:text-2xl font-bold"><%= link_to 'Read more', post_path(@post3) %></h4>
        </div>
      </div>
    </div>
  </div>
<% end %>

<div class="h-full">
  <h1 class="p-5">All posts</h1>
  <div class="flex justify-center">
    <%= form_with url: posts_path, method: :get do |form| %>
      <%= form.search_field :query %>
      <%= form.button 'Search', class: 'rounded-md hover:bg-blue-300 login-button px-5' %>
    <% end %>
  </div>  
  <% @posts.each do |post| %>
    <div class="border-2 border-black rounded-md p-5 space-y-5 mx-5 my-5 index-post">
      <h2 class="m-0"><%= post.title %></h2>
      <p class="m-0"><%= truncate(post.content.to_plain_text, length: 300) %></p>
      <ul class="flex flex-row justify-center list-none space-x-5">
        <li><%= link_to 'View Post', post_path(post), class: 'hover:underline' %></li>
        <li><%= link_to 'Edit Post', edit_post_path(post), class: 'hover:underline' if policy(post).update? %></li>
      </ul>
    </div>
  <% end %>
</div>
<% if @pagy.count > @pagy.items %>
  <div class="my-10">
    <%== pagy_nav(@pagy) %>
  </div>
<% end %>